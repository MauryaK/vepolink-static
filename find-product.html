<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vepolink</title>
    <!-- Favicon -->
    <link rel="icon" href="assets/icons/favicon.png" />
    <!-- Fonts -->
    <link rel="stylesheet" href="assets/fonts/fonts.css" />
    <!-- Style -->
    <link rel="stylesheet" href="assets/sass/style.css" />
    <!-- Owl Carousel v2.3.4 -->
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css" />

    <!-- jQuery v3.7.1 -->
    <script src="assets/js/jquery-3.7.1.min.js"></script>

    <style>
        .no-data {
            max-width: 270px;
            margin: 0 auto;
            text-align: center;
        }

        .filter-BoxWrap .filterBox .dropdownList .list label.labelfoiltr.hide {
            display: none;
        }

        .parmSercInput input[type="text"] {
            width: 100%;
            padding: 4px 10px;
            margin-bottom: 8px;
            border: 1px solid #8e8e8e;
            font-size: 14px;
            border-radius: 3px;
            outline: none;
        }

        .parmSercInput input[type="text"]:focus {
            border-color: #1631ba;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="no-banner">
        <div class="header-wrapper">
            <div class="container">
                <div class="flex">
                    <div class="logo"><a href="/"><img src="assets/images/logo-white.svg" alt="Vepolink"></a></div>
                    <div class="navigaion">
                        <div class="nav">
                            <a href="analytics.html"><span><span>Find Product</span><span>Find Product</span></span></a>
                            <a href="analytics.html"><span><span>Analytics</span><span>Analytics</span></span></a>
                            <a href="complianceguidelines.html"><span><span>Compliance Guidelines</span><span>Compliance
                                        Guidelines</span></span></a>
                            <a href="https://enviro.vepolink.com/" target="_blank" class="login_btn"><span>
                                    <span>Login</span>
                                    <span>Login</span>
                                </span></a>
                            <div class="humburger">
                                <span class="t1"></span>
                                <span class="t2"></span>
                                <span class="t3"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- End Header -->
    <!-- Main -->
    <main>
        <div class="find-product-main">
            <div class="heroSect_prod">
                <div class="container">
                    <div class="title">
                        <h1>Find Products</h1>
                        <p>Welcome to the Product Search page — your central hub for quickly finding and accessing
                            products as per your requirement, while supporting smarter and more sustainable choices.</p>
                    </div>
                    <div class="filter-BoxWrap">
                        <div class="filterWrapper">
                            <div class="flex">
                                <div class="col">
                                    <div class="filterBox">
                                        <div class="slected" data-filed="application" data-default="Select Application">
                                            <p>Select Application</p>
                                        </div>
                                        <div class="dropdownList">
                                            <div class="list">
                                                <!-- Application options will be dynamically generated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="filterBox">
                                        <div class="slected" data-filed="parameters" data-default="Select Parameters">
                                            <p>Select Parameters</p>
                                        </div>
                                        <div class="dropdownList">
                                            <div class="parmSercInput">
                                                <input type="text" onInput="handleParamsSearch(event)"
                                                    placeholder="Search...">
                                            </div>
                                            <div class="list">
                                                <!-- Parameters will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="filterBox">
                                        <div class="slected" data-filed="brands" data-default="Select Brands">
                                            <p>Select Brands</p>
                                        </div>
                                        <div class="dropdownList">
                                            <div class="list">
                                                <!-- Brands will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="btn_"><button class="btn btn_filter">Apply Filter</button></div> -->
                            </div>
                        </div>
                        <div class="filtTot"></div>
                    </div>
                    <code class="code"></code>
                </div>
            </div>

            <!-- Product List -->
            <div class="productListIn productCardA">
                <div class="container">
                    <div class="flex justify-center product_cardJs">
                    </div>
                </div>
            </div>

        </div>
    </main>
    <!-- End Main -->
    <!-- Footer -->
    <footer>
        <div class="footerStrip">
            <div class="container">
                <div class="flex">
                    <div class="col">
                        <a href="tel:+91-981-0416-132" class="item">
                            <div class="icon"><img src="assets/icons/call.png" alt=""></div>
                            <div class="title">Call Us</div>
                            <p>+91-981-0416-132</p>
                        </a>
                    </div>
                    <div class="col">
                        <a href="mailto:techsupport@vepolink.com" class="item">
                            <div class="icon"><img src="assets/icons/email.png" alt=""></div>
                            <div class="title">Email to support.</div>
                            <p>techsupport@vepolink.com</p>
                        </a>
                    </div>
                    <div class="col">
                        <a href="mailto:sales@vepolink.com" class="item">
                            <div class="icon"><img src="assets/icons/email.png" alt=""></div>
                            <div class="title">Email to sales.</div>
                            <p>sales@vepolink.com</p>
                        </a>
                    </div>
                    <div class="col">
                        <a target="_blank"
                            href="https://wa.me/9810416132?text=Hi%20team%20vepolink%20i%20am%20interested%20in%20one%20of%20your%20service%20could%20you%20connect%20me."
                            class="item">
                            <div class="icon"><img src="assets/icons/whats.png" alt=""></div>
                            <div class="title">Whatsapp</div>
                            <p>Send message to us</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-wrapper">
            <div class="container">
                <div class="flex">
                    <div class="col1">
                        <div class="item">
                            <div class="logo"><img src="assets/images/logo.png" alt=""></div>
                            <p>VEPOLINK, as the name signifies “Water” and “Link”. Water as a key source of existence
                                and environment, remains treated but not monitored.</p>
                            <div class="link_btn">
                                <a href="about.html">
                                    <span>About Vepolink</span>
                                    <img src="assets/icons/link_arrow-blue.png" alt="">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col2">
                        <div class="item">
                            <div class="title">Services</div>
                            <ul>
                                <li><a href="caaqms.html">CAAQMS</a></li>
                                <li><a href="cems.html">CEMS</a></li>
                                <li><a href="flow-level.html">Flow & Level</a></li>
                                <li><a href="gas-detection.html">Gas Detection</a></li>
                                <li><a href="noise-vibration.html">Noice & Vibration</a></li>
                                <li><a href="rtwqms.html">Water Analyzer</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col3">
                        <div class="item">
                            <div class="title">Quick Links</div>
                            <ul>
                                <li><a href="about.html">About Us</a></li>
                                <li><a href="gallery.html">Gallery</a></li>
                                <li><a href="complianceguidelines.html">Compliance Guidelines</a></li>
                                <li><a href="clients.html">Clients</a></li>
                                <li><a href="career.html">Career</a></li>
                                <li><a href="contact-us.html">Contact Us</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col4">
                        <div class="item">
                            <div class="newsLett">
                                <div class="title">News Letter</div>
                                <p>Subscribe news letter to get latest
                                    news and events.</p>
                                <form action="" class="form">
                                    <div class="form-group">
                                        <input type="text" class="form-input" placeholder="Ex: email@domain.com" />
                                        <button class="button"><img src="assets/icons/send.png" alt=""></button>
                                    </div>
                                </form>
                            </div>
                            <div class="social_links">
                                <div class="title">Find Us on.</div>
                                <ul>
                                    <li><a href=""><svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                                viewBox="0 0 320 512" height="1em" width="1em"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z">
                                                </path>
                                            </svg></a></li>
                                    <li><a href=""><svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                                viewBox="0 0 512 512" height="1em" width="1em"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z">
                                                </path>
                                            </svg></a></li>
                                    <li><a href=""><svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                                viewBox="0 0 448 512" height="1em" width="1em"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z">
                                                </path>
                                            </svg></a></li>
                                    <li><a href=""><svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                                viewBox="0 0 576 512" height="1em" width="1em"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z">
                                                </path>
                                            </svg></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer_bottom_strip">
            <div class="container">
                <div class="copyright">
                    <p>© Copyright 2023. All Rights Reserved. <a target="_blank"
                            href="https://www.vepolink.llc/index.html">Designed by <img
                                src="assets/icons/footer_icon.png" alt=""></a></p>
                    <div class="termCon">
                        <p>
                            <a href="privacy-policy.html">Privacy Policy</a>
                            <span>|</span>
                            <a href="terms-and-conditions.html">Terms & Conditions</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->

    <!-- Model Enquiry -->
    <div class="model modelEnquiry">
        <div class="modelWrapper">
            <div class="closeModel close">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em"
                    width="1em" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z">
                    </path>
                </svg>
            </div>
            <div class="model-body">
                <div class="modelHead">
                    <h2>Enquiry</h2>
                    <p>Please fill up the form below with your valid details to get a quick call back.</p>
                </div>
                <form action="" class="form">
                    <div class="form-group">
                        <input type="text" class="form-control" />
                        <label for="">Name</label>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-control" />
                        <label for="">Email</label>
                    </div>
                    <div class="form-group">
                        <input type="tel" class="form-control" />
                        <label for="">Phone</label>
                    </div>
                    <div class="form-group">
                        <select name="" class="form-control">
                            <option value="CAAQMS">CAAQMS</option>
                            <option value="CEMS">CEMS</option>
                            <option value="GAS DETECTION">GAS DETECTION</option>
                            <option value="NOISE & VIBRATION">NOISE & VIBRATION</option>
                            <option value="WATER ANALYZER">WATER ANALYZER</option>
                        </select>
                        <label for="">Select Service</label>
                        <div class="icon"><svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                                <path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="48"
                                    d="m112 184 144 144 144-144"></path>
                            </svg></div>
                    </div>
                    <div class="form-group">
                        <label for="">Message</label>
                        <textarea name="" class="form-control" rows="3" cols="4" id=""></textarea>
                    </div>
                    <div class="form-group">
                        <button class="form-button">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Humburger -->
    <div class="model modelPop humbuger_navigation">
        <div class="model-body">
            <div class="close closeModel">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="24px"
                    width="24px" xmlns="http://www.w3.org/2000/svg">
                    <path fill="none" stroke-width="2" d="M3,3 L21,21 M3,21 L21,3"></path>
                </svg>
            </div>
            <div class="model_scroll custom-scrol">
                <div class="top_service">
                    <ul class="nav_link">
                        <li class="dropdown">
                            <a href="caaqms.html">CAAQMS</a>
                            <div class="sub-nav-trigger">
                                <span></span>
                            </div>
                            <ul class="sub-nav">

                                <li><a href="adms.html">ADMS BAM 1000, 1100</a></li>
                                <li><a href="laser-scattering.html">Nephelometry based PM analyzer</a></li>
                                <li><a href="gas-monitors.html">Electrochemical Gas Analyzers</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="cems.html">CEMS</a>
                            <div class="sub-nav-trigger">
                                <span></span>
                            </div>
                            <ul class="sub-nav">
                                <li><a href="gas-analyzers.html">Gas analyzers</a></li>
                                <li><a href="dust-analyzers.html">Dust analyzers</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="flow-level.html">Flow & Level</a>
                            <div class="sub-nav-trigger">
                                <span></span>
                            </div>
                            <ul class="sub-nav">
                                <li><a href="electromagnetic-flowmeter-inline.html">Electromagnetic Flowmeter –
                                        Inline</a></li>
                                <li><a href="electromagnetic-flowmeter-insertion-type.html">Electromagnetic Flowmeter –
                                        Insertion Type</a></li>
                                <li><a href="ultrasonic-flowmeter-non-contact-type.html">Ultrasonic Flowmeter – Non
                                        Contact Type Sitrans Probe lu</a></li>
                                <li><a href="ultrasonic-flowmeter-inline.html">Ultrasonic Flowmeter – Inline</a></li>
                                <li><a href="ultrasonic-flowmeter-clamp-on.html">Ultrasonic Flowmeter – Clamp On</a>
                                </li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="gas-detection.html">Gas Detection</a>
                            <div class="sub-nav-trigger">
                                <span></span>
                            </div>
                            <ul class="sub-nav">
                                <li><a href="fixed-gas-detection-instruments.html">Fixed gas Detection instruments</a>
                                </li>
                                <li><a href="portable-gas-detection-instruments.html">Portable Gas Detection
                                        instruments</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="noise-vibration.html">Noice & Vibration</a>
                            <div class="sub-nav-trigger">
                                <span></span>
                            </div>
                            <ul class="sub-nav">
                                <li><a href="noise-monitor.html">Noice Monitor iDB</a></li>
                                <li><a href="vibration-monitor.html">Vibration Monitor iVIBE</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="rtwqms.html">Water Analyzer</a>
                            <div class="sub-nav-trigger">
                                <span></span>
                            </div>
                            <ul class="sub-nav">
                                <li><a href="extractive-aqualog.html">Extractive Aqualog 4000 /5000 UVS</a></li>
                                <li><a href="uv-vis-probe.html">In-Situ/Immersion - Aqualog 5000 UVI</a></li>
                                <li><a href="probes.html">PROBES</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="oter_pages">
                    <ul class="nav_link">
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                        <li><a href="complianceguidelines.html">Compliance Guidelines</a></li>
                        <li><a href="clients.html">Clients</a></li>
                        <li><a href="career.html">Career</a></li>
                        <li><a href="contact-us.html">Contact Us</a></li>
                    </ul>
                </div>
                <div class="contacLinks">
                    <div class="contactLin">
                        <div class="links">
                            <p class="tel">
                                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512"
                                    height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z">
                                    </path>
                                </svg>
                                <a href="tel:+919810416132">+91 - 9810416132 </a>

                            </p>
                            <p>
                                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24"
                                    height="20px" width="20px" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z">
                                    </path>
                                </svg>
                                <a href="mailto:sales@vepolink.com">sales@vepolink.com</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Overlay -->
    <div class="overlay closeModel"></div>

    <!-- Owl Carousel v2.3.4 -->
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/aos.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        // jQuery - Dropdown toggle
        const dropdown = $.noConflict(true);
        dropdown('body').on('click', '.filterBox .slected', function (e) {
            e.stopPropagation();
            dropdown(this).siblings('.dropdownList').slideToggle();
            dropdown(this).parents('.col').siblings().children().find('.dropdownList').slideUp();
        });

        // Close dropdown if clicked outside
        dropdown('body').on('click', function (e) {
            if (!dropdown(e.target).closest('.filterWrapper').length) {
                dropdown('.dropdownList').slideUp();
            }
        });

        function slugify(text) {
            return text
                .toString()
                .toLowerCase()
                .trim()
                .replace(/[\s\/\\]+/g, '-')
                .replace(/[^\w\-]+/g, '')
                .replace(/\-\-+/g, '-');
        }

        // Global data variables
        let allData = [];
        let allProducts = [];
        let allParameters = [];
        let allBrands = [];
        let allApplications = [];


        function GetDataFromJson() {
            fetch('/assets/json/product_data.json')
                .then(response => response.json())
                .then(data => {
                    allData = data;
                    allProducts = data.find(d => d.products)?.products || [];
                    allParameters = data.find(d => d.parameters)?.parameters || [];
                    allBrands = data.find(d => d.brands)?.brands || [];
                    allApplications = data.find(d => d.application)?.application || [];

                    // Initial render
                    renderProducts(allProducts.sort((a, b) => a.name.localeCompare(b.name)));
                    BindDropdownApplication(allApplications);
                    // BindDropdownParameters(allParameters);
                    // BindDropdownBrands(allBrands);
                })
                .catch(err => console.log("Fetch error:", err));
        }

        function BindDropdownApplication(applicationData) {
            const container = document.querySelector('.slected[data-filed="application"] ~.dropdownList .list');
            container.innerHTML = '';

            applicationData.forEach(element => {
                const item = document.createElement('label');
                item.setAttribute('for', `${element.category}-${element.id}`);
                item.innerHTML = `
            <input type="checkbox" 
                   data-drop="${element.category}" 
                   id="${element.category}-${element.id}" 
                   name="application" 
                   value="${element.category}" />
            <div class="checkBox"></div>
            ${element.name}
        `;
                container.appendChild(item);
            });
        }

        function handleParamsSearch(e) {
            const searchTerm = e.target.value.trim().toLowerCase();
            const selectedApplications = getSelectedValues('application');

            // Filter parameters based on selected applications and search term
            let filteredParams = allParameters;

            // Filter by application if any are selected
            if (selectedApplications.length > 0) {
                filteredParams = filteredParams.filter(param =>
                    selectedApplications.includes(param.category.toLowerCase()));
            }

            // Filter by search term
            if (searchTerm) {
                filteredParams = filteredParams.filter(param =>
                    param.name.toLowerCase().includes(searchTerm));
            }

            BindDropdownParameters(filteredParams);
        }

        function BindDropdownParameters(parameters) {
            const container = document.querySelector('.slected[data-filed="parameters"] ~.dropdownList .list');
            container.innerHTML = '';

            if (parameters.length === 0) {
                container.innerHTML = '<div class="no-results">No parameters found</div>';
                return;
            }

            parameters.forEach(element => {
                const item = document.createElement('label');
                item.setAttribute('for', `${slugify(element.name)}-${element.id}`);
                item.innerHTML = `
            <input type="checkbox" 
                   data-drop="${element.category}" 
                   id="${slugify(element.name)}-${element.id}" 
                   name="parameters" 
                   value="${element.name}" />
            <div class="checkBox"></div>
            ${element.name}
        `;
                container.appendChild(item);
            });
        }

        function BindDropdownBrands(brands) {
            const container = document.querySelector('.slected[data-filed="brands"] ~.dropdownList .list');
            container.innerHTML = '';

            if (brands.length === 0) {
                container.innerHTML = '<div class="no-results">No brands found</div>';
                return;
            }

            brands.forEach(element => {
                const item = document.createElement('label');
                item.setAttribute('for', `${slugify(element.name)}-${element.id}`);
                item.innerHTML = `
            <input type="checkbox" 
                   data-drop="${element.category}" 
                   id="${slugify(element.name)}-${element.id}" 
                   name="brands" 
                   value="${element.name}" />
            <div class="checkBox"></div>
            ${element.name}
        `;
                container.appendChild(item);
            });
        }

        function getSelectedValues(name) {
            return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(cb => cb.value.toLowerCase());
        }

        function updateFilters() {
            const selectedApplications = getSelectedValues('application');

            // Filter parameters and brands based on selected applications
            let filteredParams = allParameters;
            let filteredBrands = allBrands;

            if (selectedApplications.length > 0) {
                filteredParams = filteredParams.filter(param =>
                    selectedApplications.includes(param.category.toLowerCase()));

                filteredBrands = filteredBrands.filter(brand =>
                    selectedApplications.includes(brand.category.toLowerCase()));
            }

            // Rebind dropdowns with filtered data
            BindDropdownParameters(filteredParams);
            BindDropdownBrands(filteredBrands);

            // Clear any selections that are no longer valid
            clearInvalidSelections();

            // Apply current filters
            handleFilterChange();
        }

        function clearInvalidSelections() {
            // Clear parameter selections that are no longer in the filtered list
            const currentParams = Array.from(document.querySelectorAll('input[name="parameters"]:checked'));
            const availableParams = Array.from(document.querySelectorAll('input[name="parameters"]')).map(el => el.value);

            currentParams.forEach(checkbox => {
                if (!availableParams.includes(checkbox.value)) {
                    checkbox.checked = false;
                }
            });

            // Clear brand selections that are no longer in the filtered list
            const currentBrands = Array.from(document.querySelectorAll('input[name="brands"]:checked'));
            const availableBrands = Array.from(document.querySelectorAll('input[name="brands"]')).map(el => el.value);

            currentBrands.forEach(checkbox => {
                if (!availableBrands.includes(checkbox.value)) {
                    checkbox.checked = false;
                }
            });
        }

        function handleFilterChange() {
            const selectedApplications = getSelectedValues('application');
            const selectedParameters = getSelectedValues('parameters');
            const selectedBrands = getSelectedValues('brands');

            // Filter Products
            const filtered = allProducts.filter(product => {
                const matchApplication = selectedApplications.length === 0 ||
                    selectedApplications.includes(product.category.toLowerCase());
                const matchBrand = selectedBrands.length === 0 ||
                    selectedBrands.includes(product.brands.toLowerCase());
                const matchParameters = selectedParameters.length === 0 ||
                    product.parameters.some(p => selectedParameters.includes(p.toLowerCase()));

                return matchApplication && matchBrand && matchParameters;
            });

            renderProducts(filtered.sort((a, b) => a.name.localeCompare(b.name)));
            updateSelectedCounts();
            updateSelectedFiltersDisplay();

            let d = [];
            let f = [];

            $('.filterWrapper input[type="checkbox"]').each(function () {
                const value = $(this).val();
                const id = $(this).attr('id');
                const checkboxGroup = $(this).attr('name');

                const isChecked = $(this).is(':checked');
                const groupCheckedCount = $(`input[name="${checkboxGroup}"]:checked`).length;

                $(`.slected[data-filed="${checkboxGroup}"] p`).text(
                    groupCheckedCount > 0
                        ? `Filter Selected ${groupCheckedCount}`
                        : $(`.slected[data-filed="${checkboxGroup}"]`).attr('data-default')
                );

                if (isChecked) {
                    if (!d.includes(value)) {
                        d.push(value);
                        f.push(id);
                    }
                }
            });

            ShowSelectedFilter(d, f);
        }

        function updateSelectedCounts() {
            ['application', 'parameters', 'brands'].forEach(group => {
                const count = document.querySelectorAll(`input[name="${group}"]:checked`).length;
                const element = document.querySelector(`.slected[data-filed="${group}"] p`);
                const defaultText = document.querySelector(`.slected[data-filed="${group}"]`).getAttribute('data-default');

                element.textContent = count > 0 ? `Filter Selected (${count})` : defaultText;
            });
        }

        function updateSelectedFiltersDisplay() {
            let selectedValues = [];
            let selectedIds = [];

            ['application', 'parameters', 'brands'].forEach(group => {
                document.querySelectorAll(`input[name="${group}"]:checked`).forEach(checkbox => {
                    selectedValues.push(checkbox.value);
                    selectedIds.push(checkbox.id);
                });
            });

            let template = '';
            for (let i = 0; i < selectedValues.length; i++) {
                template += `<label for="${selectedIds[i]}">${selectedValues[i]} <span class="removeFilter" data-id="${selectedIds[i]}">×</span></label> `;
            }
            document.querySelector('.filtTot').innerHTML = template;
        }

        // Initialize
        GetDataFromJson();

        // Event listeners
        document.addEventListener('change', function (event) {
            if (event.target.name === 'application') {
                updateFilters();
            } else if (event.target.name === 'parameters' || event.target.name === 'brands') {
                handleFilterChange();
            }
        });

        // Handle remove filter clicks
        document.querySelector('.filtTot').addEventListener('click', function (e) {
            if (e.target.classList.contains('removeFilter')) {
                const id = e.target.getAttribute('data-id');
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    checkbox.checked = false;
                    if (checkbox.name === 'application') {
                        updateFilters();
                    } else {
                        handleFilterChange();
                    }
                }
            }
        });

        // Parameter search
        document.querySelector('.parmSercInput input').addEventListener('input',
            debounce(handleParamsSearch, 300));

        function debounce(fn, delay = 300) {
            let timeout;
            return function (...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => fn.apply(this, args), delay);
            };
        }

        function ShowSelectedFilter(values, ids) {
            let template = '';
            for (let i = 0; i < values.length; i++) {
                template += `<label for="${ids[i]}">${values[i]} <span class="removeFilter" data-id="${ids[i]}">×</span></label> `;
            }
            $('.filtTot').html(template);
        }

        function renderProducts(products) {
            const container = document.querySelector('.product_cardJs');
            container.innerHTML = "";

            if (products.length === 0) {
                container.innerHTML = `
            <div class='no-data'>
                <img src='/assets/dummy/404.png' />
                <p>No products found matching your criteria.</p>
            </div>`;
                return;
            }

            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'col';
                card.innerHTML = `
            <div class="card">
                <a href="product_dummy_detail.html?${slugify(product.name)}">
                    <div class="img"><img src="${product.img}" alt="${product.name}"></div>
                    <div class="content">
                        <div class="title">${product.name}</div>
                    </div>
                </a>
            </div>
        `;
                container.appendChild(card);
            });
        }
    </script>

</body>

</html>